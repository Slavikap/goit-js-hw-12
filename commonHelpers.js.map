{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function getImages(imgName, page = 1) {\n    try {\n        const BASE_URL = 'https://pixabay.com';\n        const END_POINT = '/api/';\n        const response = await axios.get(`${BASE_URL}${END_POINT}`, {\n            params: {\n                key: '42343826-37f50c073d3cb7aafd48234dd',\n                q: imgName,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: page,\n                per_page: 15\n            }\n        });\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        return [];\n    }\n}\n\nexport { getImages };\n","export default function renderCard(cards) {\n    const gallery = document.querySelector('.cards');\n    cards.forEach(card => {\n        const cardHTML =\n            `<li class=\"card\"> \n                <a class=\"card-link\" href=\"${card.largeImageURL}\">\n                    <img class=\"card-img\" src=\"${card.webformatURL}\" alt=\"${card.tags}\" data-source=\"${card.largeImageURL}\" />\n                </a>\n                <div class=\"card-data\">\n                    <div class=\"data-wrap\">\n                        <p>Likes: </p>\n                        <span>${card.likes}</span>\n                    </div>\n                    <div class=\"data-wrap\">\n                        <p>Views: </p>\n                        <span>${card.views}</span>\n                    </div>\n                    <div class=\"data-wrap\">\n                        <p>Comments: </p>\n                        <span>${card.comments}</span>\n                    </div>\n                    <div class=\"data-wrap\">\n                        <p>Downloads: </p>\n                        <span>${card.downloads}</span>\n                    </div>\n                </div>\n             </li>`;\n        gallery.insertAdjacentHTML('beforeend', cardHTML);\n    });\n}\n","import { getImages } from './js/pixabay-api.js';\nimport renderCard from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"; \n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet page = 1;\nlet currentSearchQuery = '';\nlet lightbox;\n\nfunction showLoader() {\n    loader.style.display = 'inline-block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    const userInput = event.target.elements.search.value.trim();\n\n    if (userInput === \"\") {\n        iziToast.show({\n            title: 'Error',\n            backgroundColor: '#EF4040',\n            messageColor: '#FFFFFF',\n            titleColor: '#FFFFFF',\n            message: 'Please enter your search!',\n            position: 'bottomRight'\n        });\n        return;\n    }\n\n    if (currentSearchQuery !== userInput) {\n        currentSearchQuery = userInput;\n        page = 1;\n        document.querySelector('.cards').innerHTML = ''; \n    }\n\n    showLoader();\n\n    try {\n        const images = await getImages(userInput);\n        hideLoader();\n\n        if (images.length === 0) {\n            iziToast.show({\n                title: 'Error',\n                backgroundColor: '#EF4040',\n                messageColor: '#FFFFFF',\n                titleColor: '#FFFFFF',\n                message: 'Sorry, there are no images matching your search. Please try again!',\n                position: 'bottomRight'\n            });\n            return;\n        }\n\n        renderCard(images);\n\n        if (!lightbox) {\n            lightbox = new SimpleLightbox(\".cards a\", { captionsData: \"alt\", captionDelay: 250, captionPosition: 'bottom' });\n        } else {\n            lightbox.refresh();\n        }\n\n        loadMoreBtn.style.display = 'flex';\n        window.scrollTo({\n            top: document.querySelector('.cards').offsetTop,\n            behavior: 'smooth'\n        });\n    } catch (error) {\n        hideLoader();\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Please try again later.',\n            position: 'bottomRight'\n        });\n        console.error('Error fetching images:', error);\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page++;\n    const images = await getImages(currentSearchQuery, page);\n    if (images.length === 0) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n            title: 'Info',\n            message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n            position: 'bottomRight'\n        });\n        return;\n    }\n    renderCard(images);\n    lightbox.refresh();\n\n    window.scrollBy({\n        top: document.querySelector('.card').getBoundingClientRect().height * 2,\n        behavior: 'smooth'\n    });\n});\n\n"],"names":["getImages","imgName","page","BASE_URL","END_POINT","axios","error","renderCard","cards","gallery","card","cardHTML","form","loader","loadMoreBtn","currentSearchQuery","lightbox","showLoader","hideLoader","event","userInput","iziToast","images","SimpleLightbox"],"mappings":"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"}